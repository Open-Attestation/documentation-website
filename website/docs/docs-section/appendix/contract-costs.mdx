---
id: contract-costs
title: Contract Costs
sidebar_label: Contract Costs
---

import { FiatLabel } from "../../../src/components/FiatLabel";
import { DeploymentTypeLabel } from "../../../src/components/DeploymentTypeLabel";
import { useFetchGasCost } from "../../../src/hooks";
import { BoxTag } from "../../../src/components/BoxTag";

Here is an estimated breakdown of the gas and costs involved when interacting with the contracts.
You should be aware that the estimated gas required can differ slightly depending on the states of the contract when called. The gas prices and fiat costs are constantly changing and you should check the numbers from a source you trust to get an accurate figure.

:::note
Note that the following estimation is _not_ a comprehensive list of all the costs involved and should be used as a reference only.

The live (updated every 30s) gas _average_ and ETH prices used in the estimations are retrieved from [ETHGasStation](https://ethgasstation.info/) and [CryptoCompare](https://www.cryptocompare.com/) respectively.
:::

### Verifiable Documents

<PriceTable type="verifiable" priceFormatOptions={{ maximumSignificantDigits: 3, minimumFractionDigits: 2 }} />

### Transferable Documents

<PriceTable type="transferable" priceFormatOptions={{ maximumSignificantDigits: 3, minimumFractionDigits: 2 }} />

:::note
The estimated gas may change along with the updates we have to the contracts. The current estimation is based on Document Store v2.2.3 and Token Registry v3.0.0.
:::

import { useState, useEffect } from "react";
const contractGasData = {
  verifiable: [
    {
      name: "Document Store Deployment (one time set-up)",
      gas: 1040472,
      remarks: "Only applicable to DID if require revocation.",
      deploymentType: ["DNS", "DID"],
    },
    {
      name: "Issuance of Document",
      gas: 44956,
      remarks: "Applicable for batch Issue.",
      deploymentType: ["DNS"],
    },
    {
      name: "Revoke Document",
      gas: 45052,
      deploymentType: ["DNS", "DID"],
    },
  ],
  transferable: [
    {
      name: "Token Registry Deployment (one time set-up)",
      gas: 3714024,
      deploymentType: ["DNS"],
    },
    {
      name: "Issuance of Document",
      gas: 239523,
      deploymentType: ["DNS"],
    },
    {
      name: "Transfer Ownership",
      gas: 324688,
      deploymentType: ["DNS"],
    },
    {
      name: "Transfer Holdership",
      gas: 43634,
      deploymentType: ["DNS"],
    },
    {
      name: "Nominate Ownership",
      gas: 83225,
      deploymentType: ["DNS"],
    },
    {
      name: "Endorse Ownership",
      gas: 241463,
      deploymentType: ["DNS"],
    },
    {
      name: "Surrender Document",
      gas: 93435,
      deploymentType: ["DNS"],
    },
    {
      name: "Restore Document",
      gas: 220780,
      deploymentType: ["DNS"],
    },
    {
      name: "Burn Document",
      gas: 56532,
      deploymentType: ["DNS"],
    },
  ],
};

export const PriceTable = (props) => {
  const { price, gwei } = useFetchGasCost("ethereum", 30000);
  const { price: maticPrice, gwei: maticGwei } = useFetchGasCost("polygon", 30000);
  const priceFactor = gwei * 0.000000001 * price;
  const maticPriceFactor = maticGwei * 0.000000001 * maticPrice;
  const { type, priceFormatOptions } = props;
  const costData = contractGasData[type];
  const currentDtStr = new Date().toLocaleString("en-SG", { hour12: true, timeZoneName: "short" });
  const nf = new Intl.NumberFormat();
  const rows = costData.map((record, idx) => (
    <tr key={idx}>
      <td>{record.name}</td>
      <td>{nf.format(record.gas)}</td>
      <td>{priceFactor === 0 ? <em>Calculating...</em> : <FiatLabel>{record.gas * priceFactor}</FiatLabel>}</td>
      <td>
        {maticPriceFactor === 0 ? (
          <em>Calculating...</em>
        ) : (
          <FiatLabel {...priceFormatOptions}>{record.gas * maticPriceFactor}</FiatLabel>
        )}
      </td>
      <td>
        <DeploymentTypeLabel deploymentType={record.deploymentType} remarks={record.remarks} />
      </td>
    </tr>
  ));
  const tableHeaderStyle = { textAlign: "left" };
  return (
    <div>
      <p>
        Estimations based on the current gas average at <BoxTag>{Math.ceil(gwei)} gwei (ETH)</BoxTag>, ETH price at USD{" "}
        <BoxTag>
          <FiatLabel>{price}</FiatLabel>
        </BoxTag>{" "}
        for <strong>Ethereum</strong> and <BoxTag>{Math.ceil(maticGwei)} gwei (MATIC)</BoxTag>, MATIC price at USD{" "}
        <BoxTag>
          <FiatLabel>{maticPrice}</FiatLabel>
        </BoxTag>{" "}
        for <strong>Polygon</strong> as at {currentDtStr}.
      </p>
      <table>
        <thead>
          <tr>
            <th style={tableHeaderStyle}>Action</th>
            <th style={tableHeaderStyle}>Estimated Gas</th>
            <th style={tableHeaderStyle}>Est. Fiat (USD) on Ethereum</th>
            <th style={tableHeaderStyle}>Est. Fiat (USD) on Polygon</th>
            <th style={tableHeaderStyle}>Deployment Type</th>
          </tr>
        </thead>
        <tbody>{rows}</tbody>
      </table>
    </div>
  );
};
